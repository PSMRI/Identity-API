spring.main.banner-mode=off
spring.data.jpa.repositories.enabled=true
spring.jpa.hibernate.ddl-auto=none

# Naming strategies
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyJpaCompliantImpl
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# The SQL dialect makes Hibernate generate better SQL for the chosen database
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect

spring.datasource.hikari.leak-detection-threshold=60000

# MySQL specific settings to prevent connection timeout
spring.datasource.hikari.data-source-properties.cachePrepStmts=true
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=250
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=2048
spring.datasource.hikari.data-source-properties.useServerPrepStmts=true
spring.datasource.hikari.data-source-properties.autoReconnect=true
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true
# spring.datasource.hikari.test-on-borrow=true

# Reduce batch size for faster feedback
spring.jpa.properties.hibernate.jdbc.fetch_size=10000
spring.jpa.properties.hibernate.jdbc.batch_size=5000
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Query timeout
spring.jpa.properties.hibernate.query.timeout=60000

spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=15
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.keepalive-time=120000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.leak-detection-threshold=60000


ring.datasource.hikari.data-source-properties.cachePrepStmts=true
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=500
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=4096
spring.datasource.hikari.data-source-properties.useServerPrepStmts=true
spring.datasource.hikari.data-source-properties.autoReconnect=true
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true
spring.datasource.hikari.data-source-properties.useSSL=false

spring.datasource.hikari.health-check-properties.mysql5Validation=true

#Below lines are added for security reasons
spring.session.store-type=redis
spring.redis.password=
spring.redis.port=6379

## Below values are needed for extending the expiry time and extend expiry time.
iemr.extend.expiry.time=true
iemr.session.expiry.time=7200
enableIPValidation=false

#logging.pattern.level=DEBUG
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.level.com.iemr=DEBUG
logging.level.org.springframework=INFO
logging.level.com.zaxxer.hikari=DEBUG

door-to-door-page-size=2

#Get-HRP-Status
get-HRP-Status=ANC/getHRPStatus

#Get Beneficiary ABHA
getHealthID=healthID/getBenhealthID

spring.main.allow-bean-definition-overriding=true
spring.main.allow-circular-references=true
jwt.access.expiration=86400000
jwt.refresh.expiration=604800000

# Connection timeouts
elasticsearch.connection.timeout=10000
elasticsearch.socket.timeout=120000
elasticsearch.max.retry.timeout=120000

# Connection pooling - INCREASED for bulk operations
elasticsearch.max.connections=200
elasticsearch.max.connections.per.route=100

# Request configuration
elasticsearch.request.timeout=60000
elasticsearch.max.result.window=10000

# Bulk indexing - OPTIMIZED for maximum throughput
elasticsearch.bulk.size=2000
elasticsearch.bulk.concurrent.requests=8
elasticsearch.bulk.flush.interval=30s

# Search performance (unchanged - maintains fast search)
elasticsearch.search.default.size=100
elasticsearch.search.max.size=500
elasticsearch.search.timeout=5s

# Query cache (for search performance)
elasticsearch.query.cache.enabled=true
elasticsearch.query.cache.size=10%

# Request cache
elasticsearch.request.cache.enabled=true

# Circuit breaker
elasticsearch.circuit.breaker.enabled=true
elasticsearch.circuit.breaker.limit=95%

# Async operations thread pool
elasticsearch.async.thread.pool.size=20
elasticsearch.async.thread.pool.queue.size=5000

# LOGGING (Reduce noise during sync)
logging.level.com.iemr.common.identity.service.elasticsearch=INFO
logging.level.org.elasticsearch=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.com.zaxxer.hikari=INFO

