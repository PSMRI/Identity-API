spring.main.banner-mode=off
spring.data.jpa.repositories.enabled=true
spring.jpa.hibernate.ddl-auto=none

# Naming strategies
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyJpaCompliantImpl
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# The SQL dialect makes Hibernate generate better SQL for the chosen database
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect

spring.datasource.hikari.leak-detection-threshold=60000

# MySQL specific settings to prevent connection timeout
spring.datasource.hikari.data-source-properties.cachePrepStmts=true
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=250
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=2048
spring.datasource.hikari.data-source-properties.useServerPrepStmts=true
spring.datasource.hikari.data-source-properties.autoReconnect=true
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true
# spring.datasource.hikari.test-on-borrow=true

# Reduce batch size for faster feedback
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Query timeout
spring.jpa.properties.hibernate.query.timeout=30000

spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.keepalive-time=120000
spring.datasource.hikari.validationTimeout=5000

# REMOVE CONNECTION TEST QUERY
# spring.datasource.hikari.connection-test-query=SELECT 1

# BETTER THAN autoReconnect + test-on-borrow
spring.datasource.hikari.health-check-properties.mysql5Validation=true

spring.datasource.hikari.data-source-properties.cachePrepStmts=true
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=250
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=2048
spring.datasource.hikari.data-source-properties.useServerPrepStmts=true
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true


# spring.datasource.hikari.connection-test-query=SELECT 1


# OLD Tomcat settings - REMOVE THESE (they conflict with HikariCP)
# spring.datasource.tomcat.initial-size=5
# spring.datasource.tomcat.max-idle=15
# spring.datasource.tomcat.max-active=30
# spring.datasource.tomcat.min-idle=5
# spring.datasource.tomcat.min-evictable-idle-time-millis=15000
# spring.datasource.tomcat.remove-abandoned=true
# spring.datasource.tomcat.logAbandoned=true
# spring.datasource.continue-on-error=true
# spring.datasource.tomcat.remove-abandoned-timeout=600

#Below lines are added for security reasons
spring.session.store-type=redis
spring.redis.password=
spring.redis.port=6379

## Below values are needed for extending the expiry time and extend expiry time.
iemr.extend.expiry.time=true
iemr.session.expiry.time=7200
enableIPValidation=false

#logging.pattern.level=DEBUG
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.level.com.iemr=DEBUG
logging.level.org.springframework=INFO
logging.level.com.zaxxer.hikari=DEBUG

door-to-door-page-size=2

#Get-HRP-Status
get-HRP-Status=ANC/getHRPStatus

#Get Beneficiary ABHA
getHealthID=healthID/getBenhealthID

spring.main.allow-bean-definition-overriding=true
spring.main.allow-circular-references=true
jwt.access.expiration=86400000
jwt.refresh.expiration=604800000

# Elasticsearch Configuration
elasticsearch.host=localhost
elasticsearch.port=9200
elasticsearch.username=elastic
elasticsearch.password=piramalES
elasticsearch.index.beneficiary=beneficiary_index

# Enable/Disable ES (for gradual rollout)
elasticsearch.enabled=true

# Connection pool settings
elasticsearch.connection.timeout=5000
elasticsearch.socket.timeout=60000

# Logging
logging.level.com.iemr.common.identity.service.elasticsearch=INFO
logging.level.org.elasticsearch=WARN

